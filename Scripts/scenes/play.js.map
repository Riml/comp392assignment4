{"version":3,"sources":["scenes/play.ts"],"names":[],"mappings":"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","file":"scenes/play.js","sourcesContent":["/**\n * The Scenes module is a namespace to reference all scene objects\n * \n * @module scenes\n */\nmodule scenes {\n    /**\n     * The Play class is where the main action occurs for the game\n     * \n     * @class Play\n     * @param havePointerLock {boolean}\n     */\n    export class Play extends scenes.Scene {\n        private havePointerLock: boolean;\n        private element: any;\n\n        private blocker: HTMLElement;\n        private instructions: HTMLElement;\n        private directionLight: DirectionalLight;\n        private ambientLight: AmbientLight;\n        private groundGeometry: CubeGeometry;\n        private groundPhysicsMaterial: Physijs.Material;\n        private groundMaterial: PhongMaterial;\n        private ground: Physijs.Mesh;\n        private groundTexture: Texture;\n        private groundTextureNormal: Texture;\n        private reticleGeometry: PlaneGeometry;\n        private reticleMaterial: PhongMaterial;\n        private reticleTexture: Texture;\n        private reticle: Mesh;\n        private playerGeometry: CubeGeometry;\n        private playerMaterial: Material;\n        private player: Mesh;\n        private keyboardControls: objects.KeyboardControls;\n        private mouseControls: objects.MouseControls;\n        private isGrounded: boolean;\n        private coinGeometry: Geometry;\n        private coinMaterial: Physijs.Material;\n        private coins: Physijs.ConcaveMesh[];\n        private coinCount: number;\n        private deathPlaneGeometry: CubeGeometry;\n        private deathPlaneMaterial: Physijs.Material;\n        private deathPlane: Physijs.Mesh;\n        \n        //Charge Bar\n        private chargeBar: Mesh[];\n        private chargeBarGeometry: PlaneGeometry;\n        private chargeBarMaterials: PhongMaterial[];\n        private chargeBarTextures: Texture[];\n        private chargePower: number;\n        \n        private directionLineMaterial: LineBasicMaterial;\n        private directionLineGeometry: Geometry;\n        private directionLine: Line;\n\n        private velocity: Vector3;\n        private prevTime: number;\n        private clock: Clock;\n\n        private stage: createjs.Stage;\n        private scoreLabel: createjs.Text;\n        private shotsLabel: createjs.Text;\n        //public scoreValue: number;\n        //private shotsValue: number;\n        private creator :builder.Creator = new builder.Creator();\n\n        \n        /**\n         * @constructor\n         */\n        constructor() {\n            super();\n\n            this._initialize();\n            this.start();\n        }\n\n        // PRIVATE METHODS ++++++++++++++++++++++++++++++++++++++++++\n\n        /**\n         * Sets up the initial canvas for the play scene\n         * \n         * @method setupCanvas\n         * @return void\n         */\n        private _setupCanvas(): void {\n            canvas.setAttribute(\"width\", config.Screen.WIDTH.toString());\n            canvas.setAttribute(\"height\", (config.Screen.HEIGHT * 0.1).toString());\n            canvas.style.backgroundColor = \"#000000\";\n        }\n\n        /**\n         * The initialize method sets up key objects to be used in the scene\n         * \n         * @method _initialize\n         * @returns void\n         */\n        private _initialize(): void {\n            // Create to HTMLElements\n            this.blocker = document.getElementById(\"blocker\");\n            this.instructions = document.getElementById(\"instructions\");\n            this.blocker.style.display = \"block\";\n\n            // setup canvas for menu scene\n            this._setupCanvas();\n            \n            \n            this.coinCount = 10;\n            this.prevTime = 0;\n            this.stage = new createjs.Stage(canvas);\n            this.velocity = new Vector3(0, 0, 0);\n            \n            // setup a THREE.JS Clock objectg\n            this.clock = new Clock();\n\n            // Instantiate Game Controls\n            this.keyboardControls = new objects.KeyboardControls();\n            this.mouseControls = new objects.MouseControls();\n        }\n        /**\n         * This method sets up the scoreboard for the scene\n         * \n         * @method setupScoreboard\n         * @returns void\n         */\n        private setupScoreboard(): void {\n            // initialize  score and shots values\n            scoreValue = 0;\n            shotsValue = 5;\n\n            // Add shots Label\n            this.shotsLabel = new createjs.Text(\n                \"Shots: \" + shotsValue,\n                \"40px Consolas\",\n                \"#ffffff\"\n            );\n            this.shotsLabel.x = config.Screen.WIDTH * 0.1;\n            this.shotsLabel.y = (config.Screen.HEIGHT * 0.15) * 0.20;\n            this.stage.addChild(this.shotsLabel);\n            console.log(\"Added shots Label to stage\");\n\n            // Add Score Label\n            this.scoreLabel = new createjs.Text(\n                \"Score: \" + scoreValue,\n                \"40px Consolas\",\n                \"#ffffff\"\n            );\n            this.scoreLabel.x = config.Screen.WIDTH * 0.8;\n            this.scoreLabel.y = (config.Screen.HEIGHT * 0.15) * 0.20;\n            this.stage.addChild(this.scoreLabel);\n            console.log(\"Added Score Label to stage\");\n        }\n\n        /**\n         * Add a directional light to the scene\n         * \n         * @method addDirectionalLight\n         * @return void\n         */\n        private addDirectionalLight(): void {\n            // Directional Light\n            this.directionLight = new DirectionalLight(0xffffff, 1.2);\n            this.directionLight.position.set(5, 40, 20);\n            this.directionLight.castShadow = true;\n            this.directionLight.lookAt(new Vector3(0, 0, 0));\n            this.directionLight.shadowCameraNear = 2;\n            this.directionLight.shadowCameraFar = 200;\n            this.directionLight.shadowCameraLeft = -5;\n            this.directionLight.shadowCameraRight = 5;\n            this.directionLight.shadowCameraTop = 5;\n            this.directionLight.shadowCameraBottom = -5;\n            this.directionLight.shadowMapWidth = 2048;\n            this.directionLight.shadowMapHeight = 2048;\n            this.directionLight.shadowDarkness = 0.5;\n            this.directionLight.name = \"Directional Light\";\n            this.add(this.directionLight);\n            console.log(\"Added directional light to scene\");\n        }\n        \n        /**\n         * Add an ambient light to the scene\n         * \n         * @method addAmbientLight\n         * @return void\n         */\n        private addAmbientLight(): void{\n            // Ambient Light\n            this.ambientLight = new AmbientLight(0x303030);\n            this.add(this.ambientLight);\n            console.log(\"Added an Ambient Light to Scene\");\n        }\n\n        /**\n         * Add a ground plane to the scene\n         * \n         * @method addGround\n         * @return void\n         */\n        private addGround(): void {\n            /*this.groundTexture = new THREE.TextureLoader().load('../../Assets/images/GravelCobble.jpg');\n            this.groundTexture.wrapS = THREE.RepeatWrapping;\n            this.groundTexture.wrapT = THREE.RepeatWrapping;\n            this.groundTexture.repeat.set(8, 8);\n\n            this.groundTextureNormal = new THREE.TextureLoader().load('../../Assets/images/GravelCobbleNormal.png');\n            this.groundTextureNormal.wrapS = THREE.RepeatWrapping;\n            this.groundTextureNormal.wrapT = THREE.RepeatWrapping;\n            this.groundTextureNormal.repeat.set(8, 8);*/\n\n            this.groundMaterial = new PhongMaterial({ color: 0x00FF00 });\n            /*this.groundMaterial.map = this.groundTexture;\n            this.groundMaterial.bumpMap = this.groundTextureNormal;\n            this.groundMaterial.bumpScale = 0.2;*/\n\n            this.groundGeometry = new BoxGeometry(128, 1, 128);\n            this.groundPhysicsMaterial = Physijs.createMaterial(this.groundMaterial, 1, 0);\n            this.ground = new Physijs.ConvexMesh(this.groundGeometry, this.groundPhysicsMaterial, 0);\n            this.ground.receiveShadow = true;\n            this.ground.name = \"Ground\";\n            this.ground.position.set(0, -0.5, 0);\n            this.add(this.ground);\n            console.log(\"Added Burnt Ground to scene\");\n        }\n\n        /**\n         * Adds the player controller to the scene\n         * \n         * @method addPlayer\n         * @return void\n         */\n        private addPlayer(): void {\n            \n            \n            \n            // Player Object\n            this.playerGeometry = new BoxGeometry(2, 4, 2);\n            this.playerMaterial = new LambertMaterial({ color: 0x00ff00 });\n\n            this.player = new THREE.Mesh(this.playerGeometry, this.playerMaterial);\n            this.player.position.set(0, 4, 0);\n            this.player.receiveShadow = true;\n            this.player.castShadow = true;\n            this.player.name = \"Player\";\n            this.add(this.player);\n            \n            this.directionLineMaterial = new LineBasicMaterial({ color: 0xBadBad });\n            this.directionLineGeometry = new Geometry();\n            this.directionLineGeometry.vertices.push(new Vector3(0, 0, 0)); // line origin\n            this.directionLineGeometry.vertices.push(new Vector3(0, 0, -50)); // end of the line\n            this.directionLine = new Line(this.directionLineGeometry, this.directionLineMaterial);\n            this.player.add(this.directionLine);\n            console.log(\"Added DirectionLine to the Player\");\n            \n            //console.log(\"Added Player to Scene\");\n        }\n\n        /**\n         * Add the death plane to the scene\n         * \n         * @method addDeathPlane\n         * @return void\n         */\n        /*private addDeathPlane(): void {\n            this.deathPlaneGeometry = new BoxGeometry(100, 1, 100);\n            this.deathPlaneMaterial = Physijs.createMaterial(new MeshBasicMaterial({ color: 0xff0000 }), 0.4, 0.6);\n\n            this.deathPlane = new Physijs.BoxMesh(this.deathPlaneGeometry, this.deathPlaneMaterial, 0);\n            this.deathPlane.position.set(0, -10, 0);\n            this.deathPlane.name = \"DeathPlane\";\n            this.add(this.deathPlane);\n        }*/\n        \n        /**\n         * Adds the reticle to the camera\n         * \n         * @method addReticle\n         * @return void\n         */\n        private addReticle(): void {\n            //Reticle Object\n            this.reticleTexture = new THREE.TextureLoader().load('../../Assets/images/reticleTexture.png');\n            this.reticleTexture.wrapS = THREE.RepeatWrapping;\n            this.reticleTexture.wrapT = THREE.RepeatWrapping;\n            this.reticleTexture.repeat.set(1, 1);\n            \n            this.reticleGeometry = new PlaneGeometry(0.02, 0.02);\n            this.reticleMaterial = new PhongMaterial({emissive: 0xFFFFFF});\n            this.reticleMaterial.map = this.reticleTexture;\n            this.reticleMaterial.transparent = true;\n            this.reticleMaterial.opacity = 1;\n            this.reticle = new Mesh(this.reticleGeometry, this.reticleMaterial);\n            this.reticle.name = \"Reticle\";\n            camera.add(this.reticle);\n            this.reticle.position.set(0, 0.01, -0.2);\n        }\n        \n        /**\n         * Adds the chargeBar to the camera\n         * \n         * @method addChargeBar\n         * @return void\n         */\n        private addChargeBar(): void {\n            //ChargeBar Object\n            this.chargePower = 1.0;\n            this.chargeBarGeometry = new PlaneGeometry(0.03, 0.015);\n            this.chargeBar = [];\n            this.chargeBarMaterials = [];\n            this.chargeBarTextures = [];\n            \n            for (var i = 0; i < 13; i++){\n                this.chargeBarTextures[i] = new THREE.TextureLoader().load('../../Assets/images/charge-bar/charge-bar-' + i + '.png');\n                this.chargeBarTextures[i].wrapS = THREE.RepeatWrapping;\n                this.chargeBarTextures[i].wrapT = THREE.RepeatWrapping;\n                this.chargeBarTextures[i].repeat.set(1, 1);\n\n                this.chargeBarMaterials[i] = new PhongMaterial({emissive: 0xFFFFFF});\n                this.chargeBarMaterials[i].map = this.chargeBarTextures[i];\n                this.chargeBarMaterials[i].transparent = true;\n                this.chargeBarMaterials[i].opacity = 0;\n                this.chargeBar[i] = new Mesh(this.chargeBarGeometry, this.chargeBarMaterials[i]);\n                this.chargeBar[i].name = \"ChargeBar-\" + i;\n                camera.add(this.chargeBar[i]);\n                this.chargeBar[i].position.set(0, -0.042, -0.2);\n            }\n            \n            this.chargeBarMaterials[0].opacity = 1;\n            this.chargeBarMaterials[1].opacity = 1;\n        }\n       \n        private generateLevel():void{\n            //Create Golden Cubes\n            this.creator.createCube(-5.5, 6.5, -15.5, 1, this);\n            this.creator.createCube(-0.5, 6.5, -15.5, 1, this);\n            this.creator.createCube(4.5, 6.5, -15.5, 1, this);\n            \n            // Set Positions\n            var cubetangle1Pos = new Vector3(-5, 0, -15);\n            var cubetangle2Pos = new Vector3(0, 0, -15);\n            var cubetangle3Pos = new Vector3(5, 0, -15);\n            var cubeamid1Pos = new Vector3(-5, 3, -15);\n            var cubeamid2Pos = new Vector3(0, 3, -15);\n            var cubeamid3Pos = new Vector3(5, 3, -15);\n            \n            // Instantiate Cubetangles\n            this.creator.createCubetangle(3, 3, 3, cubetangle1Pos, this);\n            this.creator.createCubetangle(3, 3, 3, cubetangle2Pos, this);\n            this.creator.createCubetangle(3, 3, 3, cubetangle3Pos, this);\n            \n            // Instantiate Cubeamids\n            this.creator.createCubeamid(3, cubeamid1Pos, this);\n            this.creator.createCubeamid(3, cubeamid2Pos, this);\n            this.creator.createCubeamid(3, cubeamid3Pos, this);\n        }\n        \n\n        /**\n         * This method adds a coin to the scene\n         * \n         * @method addCoinMesh\n         * @return void\n         */\n        private addCoinMesh(): void {\n            var self = this;\n\n            this.coins = new Array<Physijs.ConvexMesh>(); // Instantiate a convex mesh array\n\n            var coinLoader = new THREE.JSONLoader().load(\"../../Assets/imported/coin.json\", function(geometry: THREE.Geometry) {\n                var phongMaterial = new PhongMaterial({ color: 0xE7AB32 });\n                phongMaterial.emissive = new THREE.Color(0xE7AB32);\n\n                var coinMaterial = Physijs.createMaterial((phongMaterial), 0.4, 0.6);\n\n                for (var count: number = 0; count < self.coinCount; count++) {\n                    self.coins[count] = new Physijs.ConvexMesh(geometry, coinMaterial);\n                    self.coins[count].receiveShadow = true;\n                    self.coins[count].castShadow = true;\n                    self.coins[count].name = \"Coin\";\n                    self.setCoinPosition(self.coins[count]);\n                    console.log(\"Added Coin Mesh to Scene, at position: \" + self.coins[count].position);\n                }\n            });\n\n\n        }\n\n        /**\n         * This method randomly sets the coin object's position\n         * \n         * @method setCoinPosition\n         * @return void\n         */\n        private setCoinPosition(coin: Physijs.ConvexMesh): void {\n            var randomPointX: number = Math.floor(Math.random() * 20) - 10;\n            var randomPointZ: number = Math.floor(Math.random() * 20) - 10;\n            coin.position.set(randomPointX, 10, randomPointZ);\n            this.add(coin);\n        }\n\n        /**\n         * Event Handler method for any pointerLockChange events\n         * \n         * @method pointerLockChange\n         * @return void\n         */\n        pointerLockChange(event): void {\n            if (document.pointerLockElement === this.element ||\n                document.mozPointerLockElement === this.element ||\n                document.webkitPointerLockElement === this.element){\n                // enable our mouse and keyboard controls\n                this.keyboardControls.enabled = true;\n                this.mouseControls.enabled = true;\n                this.blocker.style.display = 'none';\n            } else {\n                // disable our mouse and keyboard controls\n                if (shotsValue <= 0) {\n                    this.blocker.style.display = 'none';\n                    document.removeEventListener('pointerlockchange', this.pointerLockChange.bind(this), false);\n                    document.removeEventListener('mozpointerlockchange', this.pointerLockChange.bind(this), false);\n                    document.removeEventListener('webkitpointerlockchange', this.pointerLockChange.bind(this), false);\n                    document.removeEventListener('pointerlockerror', this.pointerLockError.bind(this), false);\n                    document.removeEventListener('mozpointerlockerror', this.pointerLockError.bind(this), false);\n                    document.removeEventListener('webkitpointerlockerror', this.pointerLockError.bind(this), false);\n                } else {\n                this.blocker.style.display = '-webkit-box';\n                this.blocker.style.display = '-moz-box';\n                this.blocker.style.display = 'box';\n                this.instructions.style.display = '';\n                }\n                this.keyboardControls.enabled = false;\n                this.mouseControls.enabled = false;\n                console.log(\"PointerLock disabled\");\n            }\n        }\n\n        /**\n         * Event handler for PointerLockError\n         * \n         * @method pointerLockError\n         * @return void\n         */\n        private pointerLockError(event): void {\n            this.instructions.style.display = '';\n            console.log(\"PointerLock Error Detected!!\");\n        }\n\n        /**\n         * This method checks the charge level and shows the appropriate textures\n         * \n         * @method checkCharge\n         * @return void\n         */\n         private checkCharge(): void{\n             if (this.chargePower > 12) { this.chargePower = 12 };\n             \n             for (var i = 2; i < this.chargeBar.length; i++){\n                 if (this.chargePower >= i) {\n                     this.chargeBarMaterials[i].opacity = 1;\n                 }\n                 else {\n                     this.chargeBarMaterials[i].opacity = 0;\n                 }\n             }\n         }\n         \n         /**\n         * This method creates and launches a sphere projectile\n         * \n         * Projectile is create at player position\n         * \n         * @method launchSphere\n         * @return void\n         */\n         private launchSphere(launchPower: number, launchAngle: number, launchYaw: number): void{\n             if (shotsValue > 0){\n                this.creator.createProjectile(this.player.position.x, this.player.position.y + 2, this.player.position.z, \n                1, 5, 5, this, launchPower, launchAngle, launchYaw);\n             }\n         }\n\n\n        // Check Controls Function\n\n        /**\n         * This method updates the player's position based on user input\n         * \n         * @method checkControls\n         * @return void\n         */\n        private checkControls(): void {\n            if (this.keyboardControls.enabled) {\n                \n                //this.velocity = new Vector3();\n\n                var time: number = performance.now();\n                var delta: number = (time - this.prevTime) / 1000;\n                \n                                //ChargeBar\n                if (this.keyboardControls.charge){\n                    this.chargePower += 3 * delta;\n                }\n                else {\n                    if (this.chargePower > 1){\n                    this.launchSphere(this.chargePower * 5000 * delta, camera.rotation.x * 2000, camera.rotation.y * 700);\n                    shotsValue--;\n                    this.shotsLabel.text = \"Shots: \" + shotsValue;\n                     if (shotsValue <= 0) {\n                        // Exit Pointer Lock\n                        document.exitPointerLock();\n                        this.children = []; // an attempt to clean up\n                        this.player.remove(camera);\n\n                        // Play the Game Over Scene\n                        currentScene = config.Scene.OVER;\n                        changeScene();\n                    }\n                    \n                    }\n                    this.chargePower = 0;\n                }\n                this.checkCharge();\n\n                /*if (this.isGrounded) {\n                    var direction = new Vector3(0, 0, 0);\n                    if (this.keyboardControls.moveForward) {\n                        this.velocity.z -= 400.0 * delta;\n                    }\n                    if (this.keyboardControls.moveLeft) {\n                        this.velocity.x -= 400.0 * delta;\n                    }\n                    if (this.keyboardControls.moveBackward) {\n                        this.velocity.z += 400.0 * delta;\n                    }\n                    if (this.keyboardControls.moveRight) {\n                        this.velocity.x += 400.0 * delta;\n                    }\n                    if (this.keyboardControls.jump) {\n                        this.velocity.y += 4000.0 * delta;\n                        if (this.player.position.y > 4) {\n                            this.isGrounded = false;\n                            createjs.Sound.play(\"jump\");\n                        }\n\n                    }\n\n                    this.player.setDamping(0.7, 0.1);\n                    // Changing player's rotation\n                    this.player.setAngularVelocity(new Vector3(0, this.mouseControls.yaw, 0));\n                    direction.addVectors(direction, this.velocity);\n                    direction.applyQuaternion(this.player.quaternion);\n                    if (Math.abs(this.player.getLinearVelocity().x) < 20 && Math.abs(this.player.getLinearVelocity().y) < 10) {\n                        this.player.applyCentralForce(direction);\n                    }*/\n\n                    this.cameraLook();\n\n                } // isGrounded ends\n\n                //reset Pitch and Yaw\n                this.mouseControls.pitch = 0;\n                this.mouseControls.yaw = 0;\n\n                this.prevTime = time;\n            //} \n            // Controls Enabled ends\n            /*else {\n                this.player.setAngularVelocity(new Vector3(0, 0, 0));\n            }*/\n        }\n\n        // PUBLIC METHODS +++++++++++++++++++++++++++++++++++++++++++\n\n        /**\n         * The start method is the main method for the scene class\n         * \n         * @method start\n         * @return void\n         */\n        public start(): void {\n            var self = this;\n\n            // Set Up Scoreboard\n            this.setupScoreboard();\n\n            //check to see if pointerlock is supported\n            this.havePointerLock = 'pointerLockElement' in document ||\n                'mozPointerLockElement' in document ||\n                'webkitPointerLockElement' in document;\n\n\n\n            // Check to see if we have pointerLock\n            if (this.havePointerLock) {\n                this.element = document.body;\n\n                this.instructions.addEventListener('click', () => {\n\n                    // Ask the user for pointer lock\n                    console.log(\"Requesting PointerLock\");\n\n                    this.element.requestPointerLock = this.element.requestPointerLock ||\n                        this.element.mozRequestPointerLock ||\n                        this.element.webkitRequestPointerLock;\n\n                    this.element.requestPointerLock();\n                });\n\n                document.addEventListener('pointerlockchange', this.pointerLockChange.bind(this), false);\n                document.addEventListener('mozpointerlockchange', this.pointerLockChange.bind(this), false);\n                document.addEventListener('webkitpointerlockchange', this.pointerLockChange.bind(this), false);\n                document.addEventListener('pointerlockerror', this.pointerLockError.bind(this), false);\n                document.addEventListener('mozpointerlockerror', this.pointerLockError.bind(this), false);\n                document.addEventListener('webkitpointerlockerror', this.pointerLockError.bind(this), false);\n            }\n\n            // Scene changes for Physijs\n            this.name = \"Main\";\n            this.fog = new THREE.Fog(0xffffff, 0, 750);\n            this.setGravity(new THREE.Vector3(0, -10, 0));\n\n            this.addEventListener('update', () => {\n                this.simulate(undefined, 2);\n            });\n            \n            // Add Ambient Light to the scene\n            this.addAmbientLight();\n           \n            \n            // Add Directional Light to the scene\n            this.addDirectionalLight();\n\n            // Ground Object\n            this.addGround();\n\n            // Add player controller\n            this.addPlayer();\n\n            // Add custom coin imported from Blender\n            //this.addCoinMesh();\n\n            // Add death plane to the scene\n            //this.addDeathPlane();\n\n            // Collision Check\n\n\n            this.player.addEventListener('collision', function(eventObject) {\n                if (eventObject.name === \"Ground\") {\n                    this.isGrounded = true;\n                    createjs.Sound.play(\"land\");\n                }\n                if (eventObject.name === \"Coin\") {\n                    createjs.Sound.play(\"coin\");\n                    this.remove(eventObject);\n                    this.setCoinPosition(eventObject);\n                    scoreValue += 100;\n                    this.scoreLabel.text = \"SCORE: \" + scoreValue;\n                }\n\n                if (eventObject.name === \"DeathPlane\") {\n                    createjs.Sound.play(\"hit\");\n                    shotsValue--;\n                   \n                    this.remove(this.player);\n                    this.player.position.set(0, 20, 40);\n                    this.add(this.player);\n                }\n            }.bind(this));\n\n            // create parent-child relationship with camera and player\n            this.player.add(camera);\n            camera.position.set(0,2,0);\n            \n            // Add UI Elements\n            this.addReticle();\n            this.addChargeBar();\n            \n            \n            this.generateLevel();\n\n            this.simulate();\n        }\n\n        /**\n         * Camera Look function\n         * \n         * @method cameraLook\n         * @return void\n         */\n        private cameraLook(): void {\n            var zenith: number = THREE.Math.degToRad(25);\n            var nadir: number = THREE.Math.degToRad(-25);\n\n            var cameraPitch: number = camera.rotation.x + this.mouseControls.pitch;\n            var cameraYaw: number = camera.rotation.y + this.mouseControls.yaw;\n\n            // Constrain the Camera Pitch & Yaw\n            camera.rotation.x = THREE.Math.clamp(cameraPitch, nadir, zenith);\n            camera.rotation.y = THREE.Math.clamp(cameraYaw, nadir, zenith);\n        }\n\n        /**\n         * @method update\n         * @returns void\n         */\n        public update(): void {\n            /*\n            this.coins.forEach(coin => {\n                coin.setAngularFactor(new Vector3(0, 0, 0));\n                coin.setAngularVelocity(new Vector3(0, 1, 0));\n            });*/\n\n            this.checkControls();\n            this.stage.update();\n        }\n\n        /**\n         * Responds to screen resizes\n         * \n         * @method resize\n         * @return void\n         */\n        public resize(): void {\n            canvas.style.width = \"100%\";\n            this.shotsLabel.x = config.Screen.WIDTH * 0.1;\n            this.shotsLabel.y = (config.Screen.HEIGHT * 0.15) * 0.20;\n            this.scoreLabel.x = config.Screen.WIDTH * 0.8;\n            this.scoreLabel.y = (config.Screen.HEIGHT * 0.15) * 0.20;\n            this.stage.update();\n        }\n    }\n}"],"sourceRoot":"/source/"}